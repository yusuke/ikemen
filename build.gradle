apply plugin: "java"
apply plugin: 'idea'

repositories {
	mavenCentral()
}

task wrapper(type: Wrapper) {
    gradleVersion = '1.6'
}

dependencies {
	compile (
		[group: "org.twitter4j", name: "twitter4j",version: "3.0.2"],
		[group: "org.twitter4j", name: "twitter4j-stream",version: "3.0.2"]
	)
	testCompile (
		[group: "junit", name: "junit",version: "3.8.2"]
	)
}

jar {
	manifest {
		attributes 'Main-class': "ikemen.Main"
	}
	
	from {
		configurations.runtime.collect {
			if (it.isDirectory()){
			} else {
				it
				zipTree(it)
			}
		}
	}
	
	from {
		fileTree(dir: 'resources', includes: ['*.*'])
	}
}

task runJar (dependsOn:"jar") << {
	ant.java(jar:"${libsDir}${File.separator}ikemen.jar",fork:true)
}